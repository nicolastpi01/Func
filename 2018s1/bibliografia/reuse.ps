%!PS-Adobe-2.0
%%Creator: dvips 5.490 Copyright 1986, 1992 Radical Eye Software
%%Title: reuse.dvi
%%Pages: 16 1
%%BoundingBox: 0 0 596 842
%%DocumentFonts: Times-Roman Times-Bold Times-Italic
%%EndComments
%DVIPSCommandLine: /usr/local/bin/dvips reuse.dvi
%%BeginProcSet: tex.pro
%!
/TeXDict 250 dict def TeXDict begin /N{def}def /B{bind def}N /S{exch}N /X{S N}
B /TR{translate}N /isls false N /vsize 11 72 mul N /@rigin{isls{[0 -1 1 0 0 0]
concat}if 72 Resolution div 72 VResolution div neg scale isls{Resolution hsize
-72 div mul 0 TR}if Resolution VResolution vsize -72 div 1 add mul TR matrix
currentmatrix dup dup 4 get round 4 exch put dup dup 5 get round 5 exch put
setmatrix}N /@landscape{/isls true N}B /@manualfeed{statusdict /manualfeed
true put}B /@copies{/#copies X}B /FMat[1 0 0 -1 0 0]N /FBB[0 0 0 0]N /nn 0 N
/IE 0 N /ctr 0 N /df-tail{/nn 8 dict N nn begin /FontType 3 N /FontMatrix
fntrx N /FontBBox FBB N string /base X array /BitMaps X /BuildChar{
CharBuilder}N /Encoding IE N end dup{/foo setfont}2 array copy cvx N load 0 nn
put /ctr 0 N[}B /df{/sf 1 N /fntrx FMat N df-tail}B /dfs{div /sf X /fntrx[sf 0
0 sf neg 0 0]N df-tail}B /E{pop nn dup definefont setfont}B /ch-width{ch-data
dup length 5 sub get}B /ch-height{ch-data dup length 4 sub get}B /ch-xoff{128
ch-data dup length 3 sub get sub}B /ch-yoff{ch-data dup length 2 sub get 127
sub}B /ch-dx{ch-data dup length 1 sub get}B /ch-image{ch-data dup type
/stringtype ne{ctr get /ctr ctr 1 add N}if}B /id 0 N /rw 0 N /rc 0 N /gp 0 N
/cp 0 N /G 0 N /sf 0 N /CharBuilder{save 3 1 roll S dup /base get 2 index get
S /BitMaps get S get /ch-data X pop /ctr 0 N ch-dx 0 ch-xoff ch-yoff ch-height
sub ch-xoff ch-width add ch-yoff setcachedevice ch-width ch-height true[1 0 0
-1 -.1 ch-xoff sub ch-yoff .1 add]{ch-image}imagemask restore}B /D{/cc X dup
type /stringtype ne{]}if nn /base get cc ctr put nn /BitMaps get S ctr S sf 1
ne{dup dup length 1 sub dup 2 index S get sf div put}if put /ctr ctr 1 add N}
B /I{cc 1 add D}B /bop{userdict /bop-hook known{bop-hook}if /SI save N @rigin
0 0 moveto /V matrix currentmatrix dup 1 get dup mul exch 0 get dup mul add
.99 lt{/FV}{/RV}ifelse load def pop}N /eop{SI restore showpage userdict
/eop-hook known{eop-hook}if}N /@start{userdict /start-hook known{start-hook}
if /VResolution X /Resolution X 1000 div /DVImag X /IE 256 array N 0 1 255{IE
S 1 string dup 0 3 index put cvn put}for 65781.76 div /vsize X 65781.76 div
/hsize X}N /p{show}N /RMat[1 0 0 -1 0 0]N /BDot 260 string N /rulex 0 N /ruley
0 N /v{/ruley X /rulex X V}B /V{}B /RV statusdict begin /product where{pop
product dup length 7 ge{0 7 getinterval dup(Display)eq exch 0 4 getinterval
(NeXT)eq or}{pop false}ifelse}{false}ifelse end{{gsave TR -.1 -.1 TR 1 1 scale
rulex ruley false RMat{BDot}imagemask grestore}}{{gsave TR -.1 -.1 TR rulex
ruley scale 1 1 false RMat{BDot}imagemask grestore}}ifelse B /FV{gsave
transform round exch round exch itransform moveto rulex 0 rlineto 0 ruley neg
rlineto rulex neg 0 rlineto fill grestore}B /a{moveto}B /delta 0 N /tail{dup
/delta X 0 rmoveto}B /M{S p delta add tail}B /b{S p tail}B /c{-4 M}B /d{-3 M}
B /e{-2 M}B /f{-1 M}B /g{0 M}B /h{1 M}B /i{2 M}B /j{3 M}B /k{4 M}B /w{0
rmoveto}B /l{p -4 w}B /m{p -3 w}B /n{p -2 w}B /o{p -1 w}B /q{p 1 w}B /r{p 2 w}
B /s{p 3 w}B /t{p 4 w}B /x{0 S rmoveto}B /y{3 2 roll p a}B /bos{/SS save N}B
/eos{SS restore}B end
%%EndProcSet
%%BeginProcSet: texps.pro
%!
TeXDict begin /rf{findfont dup length 1 add dict begin{1 index /FID ne 2 index
/UniqueID ne and{def}{pop pop}ifelse}forall[1 index 0 6 -1 roll exec 0 exch 5
-1 roll VResolution Resolution div mul neg 0 0]/Metrics exch def dict begin
Encoding{exch dup type /integertype ne{pop pop 1 sub dup 0 le{pop}{[}ifelse}{
FontMatrix 0 get div Metrics 0 get div def}ifelse}forall Metrics /Metrics
currentdict end def[2 index currentdict end definefont 3 -1 roll makefont
/setfont load]cvx def}def /ObliqueSlant{dup sin S cos div neg}B /SlantFont{4
index mul add}def /ExtendFont{3 -1 roll mul exch}def /ReEncodeFont{/Encoding
exch def}def end
%%EndProcSet
TeXDict begin 39158280 55380996 1000 300 300 @start /Fa 139[9
13 2[17 17 17 4[9 3[15 101[{}7 33.333332 /Times-Italic rf /Fb
137[22 2[19 115[{}2 50.000000 /Times-Italic rf /Fc 1 59 df<60F0F06004047C830C>
58 D E /Fd 10 113 df<030007000F001F00FF00F70007000700070007000700070007000700
07000700070007007FF07FF00C147E9312>49 D<0F803FE070F0F078E038E03840380038007800
7000F001E003C007800F001E0038387038FFF8FFF80D147E9312>I<3F807FE070F0207000700F
F03FF07870F070E070E070F0F07FFE1F3E0F0E7E8D12>97 D<01F801F8003800380038003807B8
1FF838787078F038E038E038E038E038F038707878F81FFF0FBF10147F9312>100
D<007E01FF03C7038203800380FFFEFFFE03800380038003800380038003800380038003807FFC
7FFC1014809312>102 D<FF80FF80038003800380038003800380038003800380038003800380
0380038003800380FFFEFFFE0F147F9312>108 D<FB8E00FFFF803EFB803CF38038E38038E380
38E38038E38038E38038E38038E38038E380FEFBE0FEFBE0130E818D12>I<FCF000FFF8001F1C
001E1C001C1C001C1C001C1C001C1C001C1C001C1C001C1C001C1C00FF9F80FF9F80110E808D12
>I<0F803FE038E07070E038E038E038E038E038F078707038E03FE00F800D0E7E8D12>I<FDF0FF
F81F1E1E0E1C0F1C071C071C071C071C0F1E0E1F1C1FF81DE01C001C001C001C001C00FF80FF80
1015808D12>I E /Fe 134[25 25 2[28 17 19 22 1[28 25 28 41 14
2[14 28 25 17 22 28 22 28 25 12[33 28 2[30 39 2[33 4[39 30
1[36 36 1[36 65[{}30 50.000000 /Times-Bold rf /Ff 1 16 df<03C00FF01FF83FFC7FFE
7FFEFFFFFFFFFFFFFFFF7FFE7FFE3FFC1FF80FF003C010107E9115>15 D
E /Fg 63 125 df<E038F078F078F078F078F078F078F078E038E03860300D0B7C9816>34
D<0387000387000387000387000387000387007FFFC0FFFFE0FFFFE0070E00070E00070E000E1C
000E1C000E1C000E1C00FFFFE0FFFFE07FFFC01C38001C38001C38001C38001C38001C38001319
7F9816>I<30787C3C1C1C1C1C3878F0E040060D789816>39 D<00E001E0038007000E001C001C
0038003800700070007000E000E000E000E000E000E000E000E000E00070007000700038003800
1C001C000E000700038001E000E00B217A9C16>I<C000E000700038001C000E000E0007000700
03800380038001C001C001C001C001C001C001C001C001C0038003800380070007000E000E001C
0038007000E000C0000A217B9C16>I<01C00001C00001C00001C00071C700F9CF807FFF001FFC
0007F00007F0001FFC007FFF00F9CF8071C70001C00001C00001C00001C00011127E9516>I<01
C00001C00001C00001C00001C00001C00001C00001C000FFFF80FFFF80FFFF8001C00001C00001
C00001C00001C00001C00001C00001C00011137E9516>I<387C7E7E3E0E1E1C78F060070B7984
16>I<FFFF80FFFF80FFFF8011037E8D16>I<70F8F8F8700505788416>I<03E0000FF8001FFC00
1E3C00380E00780F00700700700700E00380E00380E00380E00380E00380E00380E00380E00380
F00780700700700700780F003C1E001E3C001FFC000FF80003E00011197E9816>48
D<01800380038007800F807F80FF80738003800380038003800380038003800380038003800380
0380038003807FF87FFC7FF80E197C9816>I<07E0001FF8003FFC00783E00E00700F00780F003
80600380000380000380000700000700000E00001C0000380000700000E00001C0000380000F00
001E03803803807FFF80FFFF807FFF8011197E9816>I<07E0001FF8003FFC00781E0078070030
0700000700000700000E00003E0007FC0007F00007FC00001E0000070000030000038000038060
0380F00380E00700781E003FFC001FF80007E00011197E9816>I<007C0000FC0000DC0001DC00
039C00039C00071C000F1C000E1C001E1C003C1C00381C00781C00F01C00FFFFE0FFFFE0FFFFE0
001C00001C00001C00001C00001C0001FFC001FFC001FFC013197F9816>I<3FFE003FFE003FFE
003800003800003800003800003800003800003800003BF0003FFC003FFE003C0F003007000003
80000380600380F00380F00380E00700781E003FFC001FF80007E00011197E9816>I<70F8F8F8
70000000000000000070F8F8F8700512789116>58 D<387C7C7C38000000000000000038787C7C
3C1C1C3870E0400618799116>I<000180000780001F80003E0000F80001F00007C0000F80003E
0000FC0000F00000FC00003E00000F800007C00001F00000F800003E00001F8000078000018011
157E9616>I<7FFF00FFFF80FFFF80000000000000000000000000000000FFFF80FFFF807FFF00
110B7E9116>I<C00000F00000FC00003E00000F800007C00001F00000F800003E00001F800007
80001F80003E0000F80001F00007C0000F80003E0000FC0000F00000C0000011157E9616>I<00
E00001F00001F00001B00001B00003B80003B80003B800031800071C00071C00071C00071C0007
1C000E0E000E0E000FFE000FFE001FFF001C07001C07001C07007F1FC0FF1FE07F1FC013197F98
16>65 D<01F18007FB800FFF801F0F803C0780380380700380700380F00000E00000E00000E000
00E00000E00000E00000E00000F000007003807003803803803C07001F0F000FFE0007FC0001F0
0011197E9816>67 D<7FFFC0FFFFC07FFFC01C01C01C01C01C01C01C01C01C00001C00001C1C00
1C1C001FFC001FFC001FFC001C1C001C1C001C00001C00E01C00E01C00E01C00E01C00E07FFFE0
FFFFE07FFFE013197F9816>69 D<03E30007FF000FFF001E1F003C0F00380700700700700700F0
0000E00000E00000E00000E00000E03F80E07FC0E03F80F00700700700700700380F003C0F001E
1F000FFF0007F70003E70012197E9816>71 D<7F0FE0FF8FF07F0FE01C07801C0F001C0E001C1C
001C3C001C78001CF0001CE0001DF0001FF0001FF8001F38001E1C001C1C001C0E001C0E001C07
001C07001C03807F07E0FF8FF07F07E01419809816>75 D<FFC000FFC000FFC0001C00001C0000
1C00001C00001C00001C00001C00001C00001C00001C00001C00001C00001C00001C00001C0040
1C00E01C00E01C00E01C00E0FFFFE0FFFFE0FFFFE013197F9816>I<FC07E0FE0FE0FE0FE03A0B
803B1B803B1B803B1B803B1B803B1B803BBB8039B38039B38039B38039B38039F38038E38038E3
80380380380380380380380380380380FE0FE0FE0FE0FE0FE013197F9816>I<7E1FC0FF3FE07F
1FC01D07001D87001D87001D87001DC7001DC7001CC7001CC7001CE7001CE7001CE7001C67001C
67001C77001C77001C37001C37001C37001C17007F1F00FF9F007F0F0013197F9816>I<1FFC00
3FFE007FFF00780F00F00780E00380E00380E00380E00380E00380E00380E00380E00380E00380
E00380E00380E00380E00380E00380F00780F00780780F007FFF003FFE001FFC0011197E9816>
I<7FF800FFFE007FFF001C0F801C03801C03C01C01C01C01C01C01C01C03C01C03801C0F801FFF
001FFE001FF8001C00001C00001C00001C00001C00001C00001C00007F0000FF80007F00001219
7F9816>I<7FE000FFF8007FFC001C1E001C0F001C07001C07001C07001C07001C0F001C1E001F
FC001FF8001FFC001C1C001C0E001C0E001C0E001C0E001C0E201C0E701C0E707F07E0FF87E07F
03C014197F9816>82 D<07E3001FFF003FFF00781F00F00700E00700E00700E00000F000007800
003F80001FF00007FC0000FE00000F00000700000380000380600380E00380E00700F80F00FFFE
00FFFC00C7F00011197E9816>I<7FFFE0FFFFE0FFFFE0E0E0E0E0E0E0E0E0E0E0E0E000E00000
E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000
E00007FC000FFE0007FC0013197F9816>I<7F07F0FF8FF87F07F01C01C01C01C01C01C01C01C0
1C01C01C01C01C01C01C01C01C01C01C01C01C01C01C01C01C01C01C01C01C01C01C01C00E0380
0E038007070007FF0003FE0000F8001519809816>I<FE0FE0FF1FE0FE0FE03803801C07001C07
001C07001C07000E0E000E0E000E0E000E0E00060C00071C00071C00071C00071C0003180003B8
0003B80003B80001B00001F00001F00000E00013197F9816>I<FFF0FFF0FFF0E000E000E000E0
00E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000
E000E000E000FFF0FFF0FFF00C20789C16>91 D<FFF0FFF0FFF000700070007000700070007000
700070007000700070007000700070007000700070007000700070007000700070007000700070
FFF0FFF0FFF00C207F9C16>93 D<1FE0003FF0007FF800783C00300E00000E00000E0003FE001F
FE003E0E00700E00E00E00E00E00E00E00783E007FFFE03FE7E00F83E013127E9116>97
D<7E0000FE00007E00000E00000E00000E00000E00000E3E000EFF000FFF800F83C00F00E00E00
E00E00700E00700E00700E00700E00700E00700E00E00F01E00F83C00FFF800EFF00063C001419
809816>I<03F80FFC1FFE3C1E780C7000E000E000E000E000E000F000700778073E0E1FFC0FF8
03F010127D9116>I<003F00007F00003F0000070000070000070000070003C7000FF7001FFF00
3C1F00780F00700700E00700E00700E00700E00700E00700E00700700F00700F003C1F001FFFE0
0FE7F007C7E014197F9816>I<03E00FF81FFC3C1E780E7007E007FFFFFFFFFFFFE000E0007007
78073C0F1FFE0FFC03F010127D9116>I<001F00007F8000FF8001E78001C30001C00001C0007F
FF00FFFF00FFFF0001C00001C00001C00001C00001C00001C00001C00001C00001C00001C00001
C00001C0003FFE007FFF003FFE0011197F9816>I<03E3C007F7E00FFFE01C1CC0380E00380E00
380E00380E00380E001C1C000FF8001FF0001BE0003800001800001FFC001FFF003FFF807803C0
E000E0E000E0E000E0E000E07001C07C07C03FFF800FFE0003F800131C7F9116>I<7E0000FE00
007E00000E00000E00000E00000E00000E3C000EFE000FFF000F87800F03800E03800E03800E03
800E03800E03800E03800E03800E03800E03800E03807FC7F0FFE7F87FC7F01519809816>I<01
8003C003C0018000000000000000007FC07FC07FC001C001C001C001C001C001C001C001C001C0
01C001C001C07FFFFFFF7FFF101A7D9916>I<003000780078003000000000000000001FF81FF8
1FF800380038003800380038003800380038003800380038003800380038003800380038003800
386070F0F0FFE07FC03F800D237E9916>I<7E0000FE00007E00000E00000E00000E00000E0000
0E7FE00E7FE00E7FE00E0F000E1E000E3C000E78000EF0000FF0000FF8000FBC000F1E000E0E00
0E07000E07807F87F0FFCFF07F87F01419809816>I<FFC000FFC000FFC00001C00001C00001C0
0001C00001C00001C00001C00001C00001C00001C00001C00001C00001C00001C00001C00001C0
0001C00001C00001C000FFFF80FFFF80FFFF8011197E9816>I<F9C380FFEFC0FFFFE03C78E03C
78E03870E03870E03870E03870E03870E03870E03870E03870E03870E03870E0FE7CF8FE7CF8FE
3C781512809116>I<7E3C00FEFE007FFF000F87800F03800E03800E03800E03800E03800E0380
0E03800E03800E03800E03800E03807FC7F0FFE7F87FC7F01512809116>I<03E0000FF8001FFC
003C1E00780F00700700E00380E00380E00380E00380E00380F00780700700780F003C1E001FFC
000FF80003E00011127E9116>I<7E3E00FEFF007FFF800F83C00F00E00E00E00E00700E00700E
00700E00700E00700E00700E00E00F01E00F83C00FFF800EFF000E3C000E00000E00000E00000E
00000E00000E00007FC000FFE0007FC000141B809116>I<FF0FC0FF3FE0FF7FE007F04007C000
078000078000070000070000070000070000070000070000070000070000FFFC00FFFC00FFFC00
13127F9116>114 D<0FEC3FFC7FFCF03CE01CE01C70007F801FF007F8003C600EE00EF00EF81E
FFFCFFF8C7E00F127D9116>I<0300000700000700000700000700007FFF00FFFF00FFFF000700
0007000007000007000007000007000007000007010007038007038007038007870003FE0001FC
0000F80011177F9616>I<7E1F80FE3F807E1F800E03800E03800E03800E03800E03800E03800E
03800E03800E03800E03800E03800E0F800FFFF007FBF803E3F01512809116>I<7F1FC0FF1FE0
7F1FC01C07001E0F000E0E000E0E000E0E00071C00071C00071C00071C0003B80003B80003B800
01F00001F00000E00013127F9116>I<FF1FE0FFBFE0FF1FE038038038038038038038038038E3
8019F30019F30019B3001DB7001DB7001DB7001DB7000F1E000F1E000F1E0013127F9116>I<7F
1FC07F3FC07F1FC00F1C00073C0003B80003F00001F00000E00001E00001F00003B800073C0007
1C000E0E007F1FC0FF3FE07F1FC013127F9116>I<7F1FC0FF9FE07F1FC01C07000E07000E0E00
0E0E00070E00071C00071C00039C00039C0003980001B80001B80000F00000F00000F00000E000
00E00000E00001C00079C0007BC0007F80003F00003C0000131B7F9116>I<E0E0E0E0E0E0E0E0
E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E00320779C16>124
D E /Fh 133[15 17 1[24 17 17 9 13 11 1[17 17 17 26 9 17 1[9
17 17 11 15 17 15 17 15 12[20 18 22 3[24 30 20 2[11 2[18 10[9
12[8 1[8 44[{}34 33.333332 /Times-Roman rf /Fi 202[12 12 12
12 12 49[{}5 25.000000 /Times-Roman rf /Fj 47[37 30[21 2[21
52[18 18 28 18 21 12 16 16 21 21 21 21 30 12 18 1[12 21 21
12 18 21 18 21 21 12[23 21 25 1[25 1[28 35 23 2[14 1[30 25
25 30 28 1[25 7[21 5[21 4[10 14 45[{}45 41.666668 /Times-Italic
rf /Fk 202[15 15 15 15 15 49[{}5 29.166668 /Times-Roman rf
/Fl 47[42 30[21 1[23 23 51[18 21 21 30 21 21 12 16 14 21 21
21 21 32 12 21 12 12 21 21 14 18 21 18 21 18 14 2[14 1[14 3[39
30 30 25 23 28 30 23 30 30 37 25 30 16 14 30 30 23 25 30 28
28 30 1[18 3[12 12 21 21 21 21 21 21 21 21 21 21 1[10 14 10
2[14 14 14 39[{}75 41.666668 /Times-Roman rf /Fm 134[29 1[42
1[32 19 23 26 1[32 29 32 48 16 32 1[16 32 29 19 26 32 26 32
29 10[42 1[39 1[42 1[36 45 5[23 45 1[36 2[42 8[19 29 29 29
29 29 29 29 29 29 29 2[19 1[33 43[{}43 58.333336 /Times-Bold
rf /Fn 134[19 19 27 19 19 10 15 12 1[19 19 19 29 10 19 10 10
19 19 12 17 19 17 19 17 9[35 2[23 10[12 27 27 3[25 15[19 1[19
2[9 2[21 43[{}34 37.500000 /Times-Roman rf /Fo 139[12 15 17
14[17 21 19 31[27 65[{}7 37.500000 /Times-Bold rf /Fp 134[25
2[25 25 14 19 17 1[25 25 25 39 3[14 25 25 17 22 2[25 22 11[36
30 28 4[36 1[30 36 4[28 2[33 11[25 4[25 3[12 1[12 44[{}29 50.000000
/Times-Roman rf /Fq 134[35 3[35 1[27 23 1[35 35 1[55 20 2[20
35 35 1[31 35 31 35 31 14[47 1[39 7[51 10[40 15[23 1[40 43[{}22
70.833336 /Times-Roman rf end
%%EndProlog
%%BeginSetup
%%Feature: *Resolution 300dpi
TeXDict begin
%%PaperSize: a4

%%EndSetup
%%Page: 1 1
0 bop 407 482 a Fq(Higher)o(-order)21 b(+)c(Polymorphic)j(=)d(Reusable)800
602 y Fp(Simon)11 b(Thompson)551 660 y(Computing)h(Laboratory)m(,)g
(University)f(of)h(Kent)701 718 y(Canterbury)m(,)g(CT2)h(7NF)l(,)f(U.K.)908
868 y Fo(Abstract)421 937 y Fn(This)f(paper)e(explores)h(how)g(certain)g
(ideas)g(in)h(object)f(oriented)g(languages)e(have)h(their)365
983 y(correspondents)g(in)j(functional)f(languages.)18 b(In)12
b(particular)f(we)g(look)g(at)h(the)f(analogue)f(of)365 1028
y(the)g(iterators)g(of)f(the)h(C++)f(standard)f(template)i(library)n(.)k(W)m
(e)c(also)f(give)f(an)h(example)g(of)g(the)365 1074 y(use)f(of)i(constructor)
e(classes)f(which)i(feature)g(in)h(Haskell)e(1.3)h(and)f(Gofer)n(.)262
1214 y Fm(1)58 b(Intr)o(oduction)262 1306 y Fl(The)12 b(combination)f(of)g
(higher)g(order)h(and)g(polymorphic)e(functions)h(in)g(modern)h(programming)
262 1356 y(languages)h(\320)f(chie\257y)h(in)f(functional)g(languages,)i(but)
e(increasingly)g(in)g(object-oriented)f(lan-)262 1406 y(guages)f(as)h(well)f
(\320)g(makes)h(them)f(most)g(suitable)g(for)f(software)i(reuse.)k
(Polymorphism)9 b(allows)262 1456 y(operations)g(to)h(be)i(applied)e(over)g
(whole)h(classes)h(of)e(types,)h(whilst)f(function)f(parameters)j(mean)262
1506 y(that)d(particular)h(operations)f(can)i(be)g(abstracted)g(away)m(,)h
(to)e(be)g(passed)h(in)f(as)h(values)g(on)f(applica-)262 1555
y(tion.)20 b(the)12 b(\256rst)g(part)h(of)f(the)g(paper)h(provides)e(a)i
(tutorial)e(on)h(this,)g(in)g(the)h(Miranda)1497 1540 y Fk(1)1525
1555 y Fl(functional)262 1605 y(programming)c(language.)324
1655 y(Beyond)i(this)h(`algorithmic')e(abstraction,)i(there)h(lies)f(data)g
(abstraction:)18 b(access)c(to)e(a)h(par)o(-)262 1705 y(ticular)8
b(type)h(can)h(be)g(given)f(\(solely\))f(through)g(a)h(signature)g(of)g
(operations,)g(hiding)f(the)h(concrete)262 1755 y(nature)i(of)g(the)h(type.)
19 b(In)12 b(the)f(second)h(half)g(of)f(the)h(paper)g(we)g(show)f(that)g
(using)g(a)h(higher)o(-order)n(,)262 1804 y(polymorphic)i(interface)i
(signature)g(we)g(can)h(describe)f(the)g(essential)h(properties)e(of)g
(various)262 1854 y(types,)f(and)g(using)f(this)g(approach,)i(we)g(can)f
(treat)g(one)g(type)f(as)i(if)e(it)g(were)i(another)n(.)25
b(The)15 b(ex-)262 1904 y(amples)f(in)f(the)h(paper)g(include)f(treating)g
(lists)g(as)h(trees,)i(and)e(trees)g(as)h(lists.)25 b(The)14
b(inspiration)262 1954 y(for)d(this)g(work)h(came)h(from)f(the)g
Fj(iterators)f Fl(of)h([Musser)g(and)g(Stepanov)m(,)h(1994].)19
b(An)12 b(iterator)f(is)262 2004 y(an)g(abstract)g(index)g(into)f(a)h
(sequential)g(structure,)g(giving)e(a)j(uniform)e(treatment)h(of)g(lists)f
(arrays)262 2054 y(and)k(trees.)27 b(The)15 b(aim)f(of)g(the)g(work)g(here)g
(is)g(to)g(extend)g(that)f(approach)i(in)e(two)h(ways.)27 b(First,)262
2103 y(we)14 b(wanted)g(to)f(see)i(how)f(to)f(describe)h(an)g(iterator)f(in)h
(a)g(functional)e(language)i(\261)g(the)g(list-like)262 2153
y(types.)g(More)8 b(importantly)m(,)f(we)h(wanted)g(to)g(be)g(able)g(to)g
(take)g(a)g(dif)o(ferent)g(abstract)g(view)g(of)f(types:)262
2203 y(the)k(paradigm)g(embodied)h(by)f(trees)h(is)g(divide)e(and)i(conquer)n
(,)g(and)g(we)g(show)f(that)g(if)g(we)h(take)g(a)262 2253 y
Fj(tr)n(ee-like)f Fl(view)e(of)h(lists,)g(the)g(Quicksort)f(algorithm)f(can)j
(be)f(developed)g(in)g(a)g(very)g(natural)g(way)m(.)324 2303
y(Any)d(language)g(allowing)f(higher)h(order)g(functions)f(can)i(be)g(used)g
(to)f(implement)g(these)h(ideas,)262 2352 y(but)g(extra)i(features)g(can)g
(facilitate)f(it)g(further)n(.)14 b(In)9 b(particular)g(the)g(constructor)g
(classes)i(of)e(Gofer)n(,)p 262 2388 573 2 v 307 2416 a Fi(1)321
2427 y Fh(Miranda)e(is)i(a)f(trade)f(mark)h(of)g(Research)f(Software)h(Ltd.)
967 2574 y Fl(1)p eop
%%Page: 2 2
1 bop 262 307 a Fl([Jones,)13 b(1993],)g(allow)f(the)g(recursion)h(operators)
f(to)g(be)h(overloaded,)g(avoiding)e(the)h(necessity)262 357
y(of)h(passing)g(the)g(appropriate)g(parameters)h(into)f(applications.)23
b(The)14 b(paper)g(concludes)g(with)e(a)262 407 y(survey)e(of)h(the)g(dif)o
(ferent)f(language)h(features)g(which)g(can)h(be)f(used)g(to)f(aid)h(the)g
(implementation)262 457 y(of)e(these)i(ideas.)324 506 y(I)d(am)i(grateful)d
(to)h(Ian)h(Utting)e(for)h(his)g(patient)g(explanations)f(of)i(some)g(of)f
(the)h(arcana)h(of)e Fg(C++)p Fl(,)262 556 y(and)j(for)h(pointing)d(me)k(in)e
(the)h(direction)f(of)g(the)h(Standard)g(T)m(emplate)h(Library)m(,)f
([Stepanov)g(and)262 606 y(Lee,)f(1994],)f(which)g(is)g(implemented)g(using)f
(the)i(iterator)e(classes.)262 746 y Fm(2)58 b(Functional)15
b(pr)o(ogramming)262 838 y Fl(Modern)e(functional)g(programming)g(languages)i
(like)e(Miranda,)j(Standard)e(ML)h(and)f(Haskell)262 888 y([T)o(urner)n(,)9
b(1985,)f(Milner)g Fj(et)h(al.)p Fl(,)g(1990,)f(Hudak)h Fj(et)f(al.)p
Fl(,)i(1992])d(are)j(based)f(on)f(function)f(de\256nitions)262
938 y(as)13 b Fj(equations)e Fl(or)i(more)g(generally)f(as)h(sequences)i(of)d
(equations.)22 b(For)12 b(example,)j(suppose)d(we)262 988 y(have)e(already)h
(de\256ned)f(the)h(function)p 262 1038 1433 2 v 324 1088 a
Fg(sales)21 b(::)g(num)g(->)g(num)p 262 1137 V 262 1187 a Fl(that)11
b(is)h(a)h(function)e Fg(sales)h Fl(which)f(takes)i(a)g(numerical)g(ar)o
(gument)f(\(i.e.)22 b(an)13 b(ar)o(gument)f(of)g(type)262 1237
y Fg(num)p Fl(\))e(and)h(returns)g(a)g(number)n(.)18 b(W)m(e)11
b(can)h(then)f(write)g(a)g(function)f(to)g(return)h(the)g(sum)g(of)g(the)g
(\256rst)262 1287 y Fg(n)f Fl(values)g(of)g Fg(sales)f Fl(thus:)p
262 1337 V 324 1386 a Fg(totalSales)20 b(::)h(num)g(->)g(num)324
1486 y(totalSales)f(0)h(=)h(0)324 1536 y(totalSales)e(n)h(=)h(totalSales)d
(\(n-1\))i(+)h(sales)f(\(n-1\))p 262 1586 V 262 1635 a Fl(The)10
b(\256rst)f(equation)f(gives)i(the)f(value)g(of)g Fg(totalSales)f
Fl(on)h Fg(0)p Fl(,)h(the)f(second)h(on)f(non-zero)g(values,)262
1685 y(illustrating)h(the)k(fact)f(that)g(the)h(ordering)e(of)h(the)h
(de\256ning)f(equations)f(is)i(signi\256cant,)g(the)f(\256rst)262
1735 y(one)d(to)g(apply)f(being)h(chosen.)324 1785 y(Functions)g(can)h(have)h
(various)e(alternatives)h(on)g(the)f(right-hand)g(side.)17
b(If)11 b(we)h(want)e(only)g(to)262 1835 y(add)g(the)g(positive)f(sales)i(we)
g(may)g(write)p 262 1885 V 324 1934 a Fg(totalPosSales)19 b(::)i(num)g(->)h
(num)324 2034 y(totalPosSales)d(0)i(=)h(0)324 2084 y(totalPosSales)d(n)389
2134 y(=)j(totalPosSales)d(\(n-1\))i(+)g(sales)g(\(n-1\))64
b(,)22 b(if)f(sales)g(\(n-1\))g(>)g(0)389 2183 y(=)h(totalPosSales)d(\(n-1\))
369 b(,)22 b(otherwise)p 262 2233 V 262 2283 a Fl(Finding)8
b(the)i(time)g(of)g(the)g(maximum)h(sales,)h(we)e(can)h(write)p
262 2333 V 324 2383 a Fg(maxMonth)20 b(0)i(=)f(0)324 2432 y(maxMonth)f(n)i(=)
f(n)131 b(,)21 b(if)h(sales)e(n)i(>)g(sales)e(old)967 2574
y Fl(2)p eop
%%Page: 3 3
2 bop 389 307 a Fg(=)22 b(old)86 b(,)22 b(otherwise)433 357
y(where)433 407 y(old)f(=)h(maxMonth)e(\(n-1\))p 262 457 1433
2 v 262 506 a Fl(in)d(which)g(the)g Fg(where)g Fl(clause)i(attached)f(to)f
(the)g(second)h(equation)f(is)g(used)h(to)f(make)i(local)262
556 y(de\256nitions)8 b(whose)j(scope)g(is)f(that)f(equation.)324
606 y(If)h Fg(t)g Fl(is)g(a)h(type,)f(then)g Fg([t])g Fl(is)g(the)g(type)g
(of)g(lists)f(of)h(items)g(from)g(type)g Fg(t)p Fl(,)h(so,)f(for)g(example,)p
262 656 V 324 706 a Fg([2,3,4])20 b(::)i([num])260 b([[2],[],[3,4]])19
b(::)i([[num]])p 262 756 V 262 805 a Fl(Functions)9 b(over)h(lists)f(are)i
(de\256ned)f(by)g(equations)g(just)f(as)i(above,)g(so)f(to)f(sum)i(a)g(list)e
(of)h(numbers)262 855 y(we)g(write)p 262 905 V 324 955 a Fg(sum)21
b(::)g([num])g(->)g(num)324 1005 y(sum)g([])87 b(=)21 b(0)324
1054 y(sum)g(\(a:x\))g(=)g(a)h(+)f(sum)h(x)p 262 1104 V 262
1154 a Fl(On)9 b(the)h(left)f(hand)h(sides)g(of)f(the)h(equations)f(are)i
(seen)g Fj(patterns)e Fl(rather)g(than)h(variables.)15 b(Patterns)262
1204 y(provide)c(a)j(case)g(analysis:)20 b(is)13 b(the)f(list)g(empty)m(,)i
Fg([])f Fl(or)g(not,)g Fg(\(a:x\))p Fl(?)22 b(In)13 b(the)f(latter)h(case)h
(it)e(has)262 1254 y(a)g(\256rst)g(element,)i(or)e(head,)i
Fg(a)e Fl(and)h(remainder)n(,)h(or)e(tail,)g Fg(x)p Fl(;)h(these)g
(components)f(can)h(be)g(used)f(in)262 1303 y(calculating)e(the)h(result,)g
(thus)f(pattern)h(matching)g(allows)f(the)h(selection)g(of)g(parts)g(of)g
(structured)262 1353 y(data)f(objects.)324 1403 y(Thus)17 b(far)n(,)i(what)d
(we)i(have)f(seen)g(has)h(much)f(in)f(common)h(with)f(traditional)e
(imperative)262 1453 y(programming)g(languages:)24 b(alternatives)15
b(are)h(provided)e(by)h(equations)f(with)g(multiple)g(right)262
1503 y(hand)i(sides,)j(iteration)c(by)i(recursion,)h(and)f(local)f
(de\256nitions)f(and)i(calculations)f(by)h Fg(where)262 1553
y Fl(clauses.)262 1692 y Fm(3)58 b(Higher)n(-order)15 b(functions)262
1785 y Fl(The)10 b(function)f Fg(totalSales)f Fl(returns)i(running)e(totals)i
(for)g(the)g(function)e Fg(sales)p Fl(;)h(if)h(we)h(wish)e(to)262
1835 y(do)f(the)i(same)g(for)f Fg(newSales)f Fl(we)i(have)g(to)e(write)h
(rewrite)g(the)g(function)f Fg(totalSales)p Fl(.)13 b(All)8
b(that)262 1885 y(changes)j(is)g(the)g(function)e(called.)18
b(Instead)11 b(of)f(demanding)h(a)g(re-write,)g(we)h(can)f
Fj(abstract)g Fl(from)262 1934 y(the)f(particular)f(function)g(to)g(be)i
(summed,)g(and)g(make)g(this)e(a)i(parameter)n(,)h(thus:)p
262 1984 V 324 2034 a Fg(total)21 b(::)g(\(num)g(->)g(num\))g(->)h(num)f(->)g
(num)324 2134 y(total)g(f)g(0)h(=)f(0)324 2183 y(total)g(f)g(n)h(=)f(total)g
(f)h(\(n-1\))e(+)i(f)g(\(n-1\))p 262 2233 V 262 2283 a Fl(The)10
b(running)f(totals)g(of)h(particular)g(functions)f(are)i(then)f(given)f(by)p
262 2333 V 324 2383 a Fg(totalSales)85 b(=)21 b(total)g(sales)967
2574 y Fl(3)p eop
%%Page: 4 4
3 bop 324 307 a Fg(totalNewSales)19 b(=)i(total)g(newSales)p
262 357 1433 2 v 262 407 a Fl(where)13 b(we)g(have)g Fj(partially)e(applied)i
Fl(the)f(function)f Fg(total)h Fl(to)g(the)h(\256rst)f(of)h(its)f(ar)o
(guments;)i(the)262 457 y(result)f(is)i(itself)e(a)i(function,)f(which)g
(when)h(given)f(a)g(number)h(returns)f(a)h(number)n(.)27 b(W)m(e)15
b(call)f(a)262 506 y(function)f Fj(higher)h(or)n(der)i Fl(when)e(it)g(takes)h
(a)h(function)d(as)i(ar)o(gument)g(or)g(returns)f(a)h(function)e(as)262
556 y(result;)c Fg(total)g Fl(is)h(higher)o(-order)f(in)h(both)f(senses.)324
606 y(The)14 b(abstraction)e(here)i(turns)e(a)i(particular)e(operation,)h
Fg(sales)p Fl(,)h(into)d(a)j(parameter)n(,)i Fg(f)p Fl(;)e(the)262
656 y(calculation)7 b(of)h(running)f(totals)g(can)j(then)e(be)g
Fj(r)n(eused)j Fl(in)d(many)g(situations,)g(both)f(of)h(similar)g(sales)262
706 y(calculations)h(and)i(in)e(completely)h(dif)o(ferent)g(contexts.)324
756 y(In)g(a)h(similar)e(way)m(,)i(we)g(might)f(round)f(all)h(numbers)g(in)g
(a)g(list)g(to)f(the)h(closest)h(integer)n(,)p 262 805 V 324
855 a Fg(roundList)20 b(::)h([num])g(->)g([num])324 955 y(roundList)f([])86
b(=)22 b([])324 1005 y(roundList)e(\(a:x\))g(=)i(round)f(a)g(:)h(roundList)e
(x)324 1104 y(round)h(v)g(=)h(entier)e(\(v)i(+)f(0.5\))p 262
1154 V 262 1204 a Fl(The)10 b(operation)f(of)h(rounding)e(is)h(obviously)f
(only)h(one)h(of)g(a)g(whole)g(class)g(of)g(possible)f(functions)262
1254 y(to)g(be)i(applied)e(to)h(every)h(element)f(of)g(a)h(list.)j(The)d
(general)g(function)d(to)i(`map')h(a)f(function)f(is)p 262
1303 V 324 1353 a Fg(mapNum)20 b(::)i(\(num)f(->)g(num\))g(->)g([num])g(->)h
([num])324 1453 y(mapNum)e(f)i([])87 b(=)21 b([])324 1503 y(mapNum)f(f)i
(\(a:x\))f(=)g(f)h(a)f(:)h(mapNum)f(f)g(x)p 262 1553 V 262
1602 a Fl(and)p 262 1652 V 324 1702 a Fg(roundList)f(=)h(mapNum)g(round)p
262 1752 V 262 1802 a Fl(This)10 b(Section)g(has)h(shown)f(how)g(abstracting)
g(a)h(particular)f(sort)g(of)g(behaviour)g(from)g(a)h(function)262
1851 y(increases)g(its)g(generality:)j(not)c(only)f(is)i(it)f(applicable)g
(to)g(forming)g(its)g(original)f(tar)o(get,)i(but)f(also)262
1901 y(it)f(can)i(be)g(used)f(to)g(form)g(a)h(host)e(of)h(other)g(functions.)
262 2041 y Fm(4)58 b(Polymorphism)262 2134 y Fl(Suppose)10
b(we)g(want)g(the)h(length)e(of)h(a)g(list)g(of)g(numbers.)15
b(W)m(e)c(can)g(write)p 262 2183 V 324 2233 a Fg(#)21 b([])87
b(=)22 b(0)1064 b(\(1\))324 2283 y(#)21 b(\(a:x\))g(=)h(#)f(x)h(+)f(1)p
262 2333 V 262 2383 a Fl(\(Note)9 b(that)h(function)f(application)g(binds)g
(more)i(tightly)c(then)j(operator)g(application,)f(so)i(that)262
2432 y Fg(#)21 b(x)h(+)f(1)11 b Fl(equals)f Fg(\(#)22 b(x\)+1)p
Fl(.\))15 b(The)c(de\256nition)e(contains)h(no)g(reference)i(to)d(the)i(type)
f(of)g(objects)967 2574 y(4)p eop
%%Page: 5 5
4 bop 262 307 a Fl(in)9 b(the)h(list)f(ar)o(gument,)i(and)g(so)f(it)f(is)h
(applicable)g(to)g(a)h(list)e(of)h Fj(any)g Fl(type.)15 b(Its)10
b(type)g(is)p 262 357 1433 2 v 324 407 a Fg(#)21 b(::)h([*])f(->)g(num)977
b(\(2\))p 262 457 V 262 506 a Fl(in)11 b(which)g(the)h(`)p
Fg(*)p Fl(')f(is)h(a)g Fj(type)g(variable)p Fl(.)20 b(Just)11
b(as)i(for)e(an)h(ordinary)f(variable,)h(a)h(type)e(variable)h(is)262
556 y(used)f(to)g(signify)f(that)h(the)g(property)f(is)h(valid)g(for)g(any)g
Fj(instance)g Fl(of)g(the)h(variable.)18 b(In)11 b(this)g(case,)262
606 y Fg(\(2\))e Fl(implies)h(that)p 262 656 V 324 706 a Fg(#)21
b(::)h([[num]])e(->)h(num)324 756 y(#)g(::)h([bool])42 b(->)21
b(num)p 262 805 V 262 855 a Fl(to)7 b(take)i(two)f(examples.)16
b(T)m(ypes)9 b(containing)e(variables,)i(such)f(as)i Fg(\(2\))p
Fl(,)e(are)i(called)e Fj(polymorphic)p Fl(;)262 905 y(alternatively)g(we)j
(might)e(call)i(the)f(de\256nition)e Fg(\(1\))i Fj(generic)p
Fl(.)324 955 y(Other)g(objects)g(of)g(polymorphic)e(type)i(are)h
Fg([])21 b(::)h([*])10 b Fl(and)p 262 1005 V 324 1054 a Fg(swap)21
b(::)g(\(*,**\))g(->)g(\(**,*\))324 1104 y(swap)g(\(a,b\))g(=)g(\(b,a\))p
262 1154 V 262 1204 a Fl(where)11 b(the)f(elements)h(in)f(a)h(pair)f(have)h
(their)f(order)g(swapped.)16 b(For)10 b(instance,)h Fg(swap)21
b(\(True,3\))262 1254 y Fl(is)11 b Fg(\(3,True\))p Fl(;)f(from)h(this)g
(example)h(it)f(is)g(apparent)h(that)f(the)g(type)g(variables)h
Fg(*)f Fl(and)h Fg(**)f Fl(can)h(be)262 1303 y(given)d(dif)o(ferent)h
(instances,)h(so)f(that)p 262 1353 V 324 1403 a Fg(swap)21
b(::)g(\(bool,num\))f(->)h(\(num,bool\))p 262 1453 V 262 1503
a Fl(in)9 b(the)h(example)h(seen)g(above.)324 1553 y(Polymorphism)d(supports)
h(re-use:)14 b(a)d(function)d(intended)h(to)g(give)g(the)h(length)e(of)i
(numerical)262 1602 y(lists)f(can)i(be)f(used)h(over)f Fj(any)g
Fl(list)f(type,)i(for)e(example.)262 1739 y Fm(5)58 b(Higher)n(-Order)15
b(+)f(Polymorphic)262 1832 y Fl(Separately)m(,)f(we)g(have)f(seen)h(that)f
(higher)o(-order)f(functions)f(and)j(polymorphic)d(functions)h(each)262
1882 y(support)e(reuse.)17 b(T)m(ogether)n(,)12 b(we)f(have)g
Fj(general)g Fl(functions)e(of)i(considerable)f(power)n(.)17
b(In)10 b(Section)262 1931 y(3)e(we)g(de\256ned)h(a)g(higher)o(-order)e
(function)f(to)i(`map')g(numeric)h(functions)e(along)g(lists)g(of)h(numbers.)
262 1981 y(Nowhere)13 b(in)f(the)h(de\256nition)f(is)h(it)f(apparent)h(that)g
(the)g(lists)f(are)i(numerical,)g(and)g(we)f(have)h(the)262
2031 y(general)c(de\256nition)p 262 2081 V 324 2131 a Fg(map)21
b(::)g(\(*)h(->)f(**\))g(->)h([*])f(->)g([**])324 2230 y(map)g(f)h([])86
b(=)22 b([])324 2280 y(map)f(f)h(\(a:x\))e(=)i(f)f(a)h(:)g(map)f(f)g(x)p
262 2330 V 262 2380 a Fl(W)m(e)10 b(have)h(two)f(dimensions)f(of)h
(generality)f(here:)324 2449 y Ff(\017)20 b Fl(The)12 b(type)f(of)g(list)g
(along)f(which)h(the)g(operation)g(is)g(applied)f(is)i(arbitrary)m(,)f(as)h
(is)f(the)g(result)967 2574 y(5)p eop
%%Page: 6 6
5 bop 365 307 a Fl(type)10 b(of)g(the)g(operation.)324 390
y Ff(\017)20 b Fl(Once)12 b(the)e(input)f(and)i(output)d(types)j(are)g
(known,)f(there)h(is)f(a)i(choice)f(of)f(operations)f(to)h(be)365
440 y(applied:)k(the)c(choice)h(is)f(given)g(as)g(an)h(ar)o(gument)f(when)h
Fg(map)f Fl(is)g(applied.)262 559 y Fe(Forming)i(general)h(functions)262
636 y Fl(How)8 b(do)f(we)i(\256nd)f(the)g(de\256nitions)e(of)i(general)h
(functions?)k(Often)8 b(it)f(can)i(be)g(seen)g(as)g(a)f(two-stage)262
686 y(process,)j(which)f(we)g(illustrate)f(with)g(the)h Fg(sum)g
Fl(function)f(from)h(Section)g(2.)p 262 736 1433 2 v 324 786
a Fg(sum)21 b(::)g([num])g(->)g(num)324 836 y(sum)g([])87 b(=)21
b(0)324 885 y(sum)g(\(a:x\))g(=)g(a)h(+)f(sum)h(x)p 262 935
V 262 985 a Fl(What)10 b(can)h(become)g(a)g(parameter)g(here?)324
1068 y Ff(\017)20 b Fl(The)11 b(operation)e(we)i(use)g(to)f(combine)g(the)g
(values,)h Fg(\(+\))f Fl(is)g(a)g(function)f(of)h(type)365
1118 y Fg(num)21 b(->)h(num)f(->)g(num)324 1201 y Ff(\017)f
Fl(The)11 b(start)f(value,)h Fg(0)p Fl(,)f(is)g(a)h(number)n(.)262
1284 y(Rewriting,)d(we)j(have)p 262 1334 V 324 1383 a Fg(foldr)21
b(::)g(\(num->num->num\))e(->)i(num)g(->)h([num])e(->)i(num)324
1483 y(foldr)f(f)g(st)h([])86 b(=)22 b(st)846 b(\(3\))324 1533
y(foldr)21 b(f)g(st)h(\(a:x\))e(=)i(f)f(a)h(\(foldr)f(f)g(st)h(x\))324
1633 y(sum)f(=)h(foldr)e(\(+\))h(0)p 262 1682 V 262 1732 a
Fl(The)13 b(operation)g(is)g(called)g Fg(foldr)g Fl(because)h(it)f(involves)f
Fj(folding)f Fl(in)i(the)g(function)f Fg(f)h Fl(from)g(the)262
1782 y Fj(right)p Fl(.)h(For)c(example,)p 262 1832 V 324 1882
a Fg(foldr)21 b(\(+\))g(0)g([v)629 1888 y Fd(1)649 1882 y Fg(,v)692
1888 y Fd(2)712 1882 y Fg(,)p Fc(:)7 b(:)g(:)e Fg(,v)833 1888
y Fd(n)852 1882 y Fg(])22 b(=)g(v)961 1888 y Fd(1)1003 1882
y Fg(+)f(\(v)1090 1888 y Fd(2)1132 1882 y Fg(+)p Fc(:)7 b(:)g(:)e
Fg(+)21 b(\(v)1296 1888 y Fd(n)1337 1882 y Fg(+)h(0\))p Fc(:)7
b(:)g(:)e Fg(\))p 262 1931 V 262 1981 a Fl(After)h(transforming)g(from)g(the)
g(particular)g(de\256niti)o(on)g(to)f Fg(sum)h Fl(a)g(list,)t(the)g
(de\256nition)g Fg(\(3\))g Fl(becomes)262 2031 y(polymorphic,)17
b(since)h(there)f(is)g(no)g(longer)f(any)h(reference)i(to)d(the)h(lists)g
(being)f(made)i(up)f(of)262 2081 y(numbers.)e(W)m(e)c(have)p
262 2131 V 324 2180 a Fg(foldr)21 b(::)g(\(*->*->*\))f(->)h(*)h(->)f([*])g
(->)h(*)p 262 2230 V 262 2280 a Fl(so)10 b(that)f(we)i(can)g(join)e(a)h(list)
f(of)h(lists)f(by)h(folding)e(in)i(the)g(operator)g Fg(++)f
Fl(which)h(joins)f(together)g(two)262 2330 y(lists:)p 262 2380
V 324 2430 a Fg(concat)20 b(::)i([[*]])e(->)i([*])967 2574
y Fl(6)p eop
%%Page: 7 7
6 bop 324 307 a Fg(concat)20 b(=)i(foldr)f(\(++\))g([])324
407 y(concat)f([[2,3],[],[4,1]])324 457 y(=)h([2,3])g(++)h(\([])f(++)g
(\([4,1])g(++)g([]\)\))324 506 y(=)g([2,3,4,1])p 262 556 1433
2 v 262 606 a Fl(In)9 b(fact,)i(the)g(full)e(generality)686
591 y Fk(2)712 606 y Fl(of)h(the)g(type)g(is)p 262 656 V 324
706 a Fg(foldr)21 b(::)g(\(*->**->**\))e(->)j(**)f(->)h([*])f(->)g(**)p
262 756 V 262 805 a Fl(In)13 b(other)g(words,)i(there)f(is)g(no)f(reason)i
(for)e(the)h(function)e(folded)h(in)h(to)f(return)g(a)h(value)g(of)g(the)262
855 y(same)f(type)e(as)i(the)e(elements)i(of)e(the)h(list.)19
b(For)11 b(example,)j(we)e(can)h(de\256ne)f(the)g(length)e(function)262
905 y(by)f(folding)g(in)g Fg(addOne)p 262 955 V 324 1005 a(#)21
b(=)h(foldr)f(addOne)f(0)411 1054 y(where)411 1104 y(addOne)h(val)g(len)g(=)g
(len)h(+)f(1)p 262 1154 V 262 1322 a Fe(General)12 b Fb(vs)g
Fe(polymorphic)262 1400 y Fl(It)6 b(is)h(instructive)f(to)g(examine)i(the)f
(polymorphic)f(functions)g(provided)g(in)g(the)h(Miranda)g(`standard)262
1450 y(environment'.)22 b(A)13 b(few)g(are)h(\256rst-order:)19
b(they)13 b(return)f(the)h(length)f(of)g(a)i(list,)f(reverse)h(a)f(list)f(or)
262 1500 y(divide)d(a)j(list)d(into)h(parts)g(by)h(taking)e(or)i(dropping)e
(a)i(number)g(of)f(elements;)i(all)e(these)h(functions)262
1550 y(are)g(`structural',)e(in)g(that)h(their)g(operation)f(is)h
(independent)f(of)h(the)g(elements)h(of)f(the)g(list.)1580
1534 y Fk(3)324 1599 y Fl(The)k(majority)e(of)i(the)f(library)f(functions)h
(over)g(lists)g(will)f(examine)i(elements,)i(and)d(these)262
1649 y(functions)c(are)j(higher)o(-order)n(,)e(since)h(the)g(way)g(in)f
(which)h(the)f(elements)i(are)f(examined)h(is)e(pack-)262 1699
y(aged)g(as)h(a)g(function)e(or)h(functions,)f(passed)i(into)e(the)h(general)
h(function)d(when)j(it)e(is)h(applied.)1636 1684 y Fk(4)324
1749 y Fl(This)h(analysis)h(is)f(based)i(on)e(examining)g(a)h(functional)f
(library)m(,)g(but)g(there)h(is)f(every)h(reason)262 1799 y(to)c(believe)h
(that)f(in)h(an)g(imperative)g(context)f(a)h(similar)g(conclusion)f(will)f
(be)j(reached.)16 b([Kershen-)262 1848 y(baum)10 b Fj(et)g(al.)p
Fl(,)h(1988])e(discusses)i(the)f(role)g(of)g(higher)f(order)h(imperative)g
(programs.)324 1898 y(The)k(way)f(in)g(which)g(instantiation)e(takes)j(place)
g(is)f(assumed)i(here)e(to)g(be)h(function)e(appli-)262 1948
y(cation;)d(an)i(ar)o(gument)g(can)g(be)g(made)g(for)g(replacing)f(higher)o
(-order)f(functions)g(by)h(parametrised)262 1998 y(modules,)19
b([Goguen,)g(1990],)g(but)d(this)h(mechanism)h(appears)h(to)e(be)g
(simultaneously)f(more)262 2048 y(cumbersome)11 b(and)f(less)h(powerful;)e
(we)i(discuss)f(this)f(further)h(in)f(Section)h(9)g(below)m(.)p
262 2083 573 2 v 307 2111 a Fi(2)321 2123 y Fh(This)f(greater)e(than)h
(anticipated)f(generality)g(is)h(not)g(an)g(isolated)f(phenomenon.)307
2151 y Fi(3)321 2163 y Fh(This)j(intuitive)f(characterisation)f(can)h(be)g
(made)g(formal;)h(the)f(functions)f(are)h(strict)h(in)g(the)f
Fa(spine)g Fh(the)g(list,)i(but)e(are)262 2202 y(lazy)e(in)h(the)g(elements)g
(themselves.)307 2231 y Fi(4)321 2243 y Fh(In)g(general)e(these)h(functions)g
(will)h(be)f(strict)i(in)e(the)h(elements)f(of)g(their)h(list)g(ar)o
(guments.)j(For)d(instance,)f Fd(map)17 b(f)7 b Fh(is)h(as)262
2282 y(strict)g(in)g(the)g(elements)g(as)g(is)g(the)g(function)f
Fd(f)p Fh(.)967 2574 y Fl(7)p eop
%%Page: 8 8
7 bop 262 307 a Fm(6)58 b(The)14 b(essence)f(of)i(lists)262
400 y Fl(The)10 b(type)g Fg([*])g Fl(is)g(characterised)h(by)f(its)g
(constructors)p 262 450 1433 2 v 324 499 a Fg([])43 b(::)21
b([*])324 549 y(\(:\))g(::)g(*)h(->)f([*])g(->)h([*])p 262
599 V 262 649 a Fl(the)10 b(list)f Fg([2,12])g Fl(being)h(built)e(thus:)p
262 699 V 324 748 a Fg(2)21 b(:)h(\(12)f(:)h([]\))p 262 798
V 262 848 a Fl(Every)8 b(list)f(can)i(be)f(seen)h(as)g(arising)f(in)f(this)h
(way)m(,)h(by)f(repeatedly)g(adding)f(elements)i(to)f(the)g(empty)262
898 y(list.)14 b(How)c(are)h(lists)e(used?)16 b(A)10 b(typical)f
(de\256nition)g(has)i(the)f(form)p 262 948 V 324 998 a Fg(g)21
b([])87 b(=)22 b(st)324 1047 y(g)f(\(a:x\))g(=)h(...)f(a)g(...)h(x)f(...)g(g)
h(x)g(...)p 262 1097 V 262 1147 a Fl(where)10 b(the)f(right-hand)f(side)i(of)
f(the)h(de\256nition)e(of)h Fg(g)22 b(\(a:x\))9 b Fl(uses)h(the)g(components)
f Fg(a)h Fl(and)f Fg(x)h Fl(as)262 1197 y(well)e(as)i(the)e(value)h(of)g
Fg(g)f Fl(on)h(the)g(tail,)f Fg(g)22 b(x)p Fl(.)15 b(Rewriting)7
b(this)h(as)h(a)g(function)f(application,)g(we)h(have)p 262
1247 V 324 1296 a Fg(g)21 b([])87 b(=)22 b(st)324 1346 y(g)f(\(a:x\))g(=)h(h)
f(\(g)h(a\))f(a)h(x)p 262 1396 V 262 1446 a Fl(As)10 b(a)h(higher)e(order)h
(function,)f(we)i(de\256ne)p 262 1496 V 324 1545 a Fg(fold)21
b(::)g(\(**)g(->)h(*)f(->)h([*])f(->)g(**\))g(->)h(**)f(->)h([*])f(->)g(**)
324 1595 y(fold)g(h)g(st)h([])86 b(=)22 b(st)324 1645 y(fold)f(h)g(st)h
(\(a:x\))e(=)i(h)g(\(fold)e(h)i(st)f(x\))h(a)f(x)p 262 1695
V 262 1745 a Fl(which)11 b(can)i(be)f(seen)g(as)h(a)f(generalisation)f(of)h
(the)g Fg(foldr)e Fl(function,)i(in)f(that)g Fg(h)h Fl(takes)g(the)g(tail)f
Fg(x)262 1795 y Fl(as)h(an)h(ar)o(gument)f(in)g(addition)e(to)i(the)g(head)g
(of)g(the)g(list)f(and)h(the)g(recursive)h(call)f(of)g(the)g(folding)262
1844 y(function.)412 1829 y Fk(5)324 1894 y Fl(Using)k Fg(fold)p
Fl(,)i Fg(empty)j(=)g([])c Fl(and)g Fg(cons)k(=)g(\(:\))27
b Fl(we)18 b(can)f(de\256ne)h(any)e(list)g(processing)262 1944
y(function.)d(For)d(example,)p 262 1994 V 324 2044 a Fg(tail)21
b(=)43 b(fold)21 b(tailPart)f(\(error)h("tail"\))498 2093 y(where)498
2143 y(tailPart)f(v)i(a)f(x)h(=)g(x)324 2193 y(map)f(g)h(=)f(fold)g(h)h
(empty)498 2243 y(where)498 2293 y(h)g(v)f(a)h(x)f(=)h(cons)f(\(g)g(a\))h(v)p
262 2342 V 262 2369 573 2 v 307 2397 a Fi(5)321 2408 y Fh(Note)8
b(that)g(the)g Fd(fold)f Fh(function)g(here)g(is)i Fa(not)f
Fh(the)g(same)f(as)h(the)g Fd(fold)f Fh(in)h(the)g(Miranda)f(standard)g
(environment.)967 2574 y Fl(8)p eop
%%Page: 9 9
8 bop 262 307 a Fl(From)8 b(another)n(,)h(more)f(abstract,)i(point)c(of)i
(view)m(,)h(we)g(can)g(see)g Fj(any)f Fl(family)g(of)g(types)g
Fg(t)21 b(*)9 b Fl(as)f(being)262 357 y(a)i(list)f(of)h Fg(*)h
Fl(if)e(we)i(have)g(objects)p 262 407 1433 2 v 324 457 a Fg(empty)21
b(::)g(t)h(*)324 506 y(cons)43 b(::)21 b(*)h(->)f(t)g(*)h(->)f(t)h(*)781
b(\(4\))324 556 y(fold)43 b(::)21 b(\(**)g(->)g(*)h(->)f(t)h(*)g(->)f(**\))g
(->)h(**)f(->)g(t)h(*)f(->)h(**)p 262 606 V 262 656 a Fl(These)9
b(objects)f(can)h(become)g Fj(parameters)g Fl(to)f(the)g(de\256nitions)e(of)i
Fg(tail)p Fl(,)h Fg(map)p Fl(,)f(and)h(so)f(on,)h(giving)p
262 706 V 324 756 a Fg(mapGen)20 b(::)i(\()f(t)h(*)f(,)585
805 y(*)h(->)f(t)h(*)f(->)h(t)f(*)h(,)585 855 y(\(**)f(->)h(*)f(->)h(t)f(*)h
(->)f(**\))h(->)f(**)g(->)h(t)f(*)h(->)f(**)h(\))f(->)542 905
y(\(***)g(->)g(****\))g(->)g(t)h(***)f(->)g(t)h(****)324 955
y(mapGen)e(\(empty,cons,fold\))f(g)455 1005 y(=)i(fold)g(h)h(empty)498
1054 y(where)498 1104 y(h)g(v)f(a)h(x)f(=)h(cons)f(\(g)g(a\))h(v)p
262 1154 V 262 1204 a Fl(T)m(o)12 b(summarise,)h(we)g(have)f(shown)g(in)f
(this)g(Section)g(that)h(a)g(family)f(of)h(types)g Fg(t)21
b(*)12 b Fl(is)g Fj(list-like)e Fl(if)262 1254 y(we)g(can)h(de\256ne)g
(functions)d(conforming)h(to)h(the)g(signature)f Fg(\(4\))p
Fl(.)15 b(Given)9 b(such)i(a)f(family)m(,)g(we)h(can)262 1303
y(de\256ne)f(all)g(the)g(general)h(functions)e(over)h(lists)f(over)h(the)g
(types)g(in)g(the)g(family)m(.)324 1353 y(The)g(novelty)e(of)h(this)g
(approach)g(is)h(that)f Fg(t)21 b(*)9 b Fl(can)i(be)e(any)h(family)f(of)g
(types:)14 b(we)c(shall)f(see)h(in)262 1403 y(the)g(next)f(Section)h(that)g
(trees)h(and)f(error)g(types)g(conform)g(to)g(this)f(signature.)324
1453 y(This)i(characterisation)g(is)g(inspired)f(by)h(the)g
Fj(iterators)g Fl(of)g(the)g(Standard)g(T)m(emplate)h(Library)262
1503 y(for)k Fg(C++)p Fl(,)j([Stepanov)e(and)g(Lee,)k(1994,)d(Musser)g(and)f
(Stepanov)m(,)j(1994].)35 b(Iterators)16 b(are)i(an)262 1553
y(abstraction)10 b(from)i(indices)f(\(or)g(pointers\),)g(allowing)f(a)j(walk)
e(through)f(a)i(sequential)f(structure.)262 1602 y(List-like)j(types)h(are)i
(analogue)f(of)f(these)h(in)f(a)h(functional)e(setting,)j(and)e(the)h
(tree-like)f(types)262 1652 y(discussed)9 b(in)h(Section)f(8)h(generalise)g
(them)g(in)f(providing)e(a)j(`divide)f(and)g(conquer)r(')g(interface)h(to)262
1702 y(a)g(data)h(structure,)f(which)g(is)g(not)f(provided)g(\(at)h(least)h
(directly\))e(by)h(iterators.)262 1842 y Fm(7)58 b(V)n(iews)14
b(of)g(data:)23 b(list-like)15 b(types)262 1934 y Fl(W)m(e)10
b(have)h(various)f(examples)h(of)f(list-like)e(types,)i(which)g(we)h
(enumerate)g(now)m(.)262 2053 y Fe(T)l(r)o(ees)i(as)g(lists)262
2131 y Fl(Given)c(the)h(de\256nition)p 262 2180 V 324 2230
a Fg(tree)21 b(*)g(::=)h(Leaf)e(|)i(Node)f(*)h(\(tree)e(*\))i(\(tree)f(*\))p
262 2280 V 262 2330 a Fl(we)11 b(can)g(make)h(a)f(sequential)f(traversal)h
(of)f(these)i(trees.)17 b(The)11 b(de\256nitions)e(of)h Fg(empty)p
Fl(,)h Fg(cons)f Fl(and)262 2380 y Fg(fold)f Fl(follow)g(now)m(.)967
2574 y(9)p eop
%%Page: 10 10
9 bop 262 307 1433 2 v 324 357 a Fg(empty)21 b(=)g(Leaf)324
457 y(cons)g(a)g(Leaf)239 b(=)22 b(Node)f(a)g(Leaf)g(Leaf)324
506 y(cons)g(a)g(\(Node)g(b)h(t1)f(t2\))g(=)h(Node)f(b)g(\(cons)g(a)h(t1\))f
(t2)p 262 556 V 262 606 a Fl(As)16 b(can)g(be)h(seen)g(from)e(the)h
(de\256nition,)g(in)g(this)f(case)i(the)f(traversal)g(is)g(in)f(pre-order;)j
(other)262 656 y(traversals)10 b(of)h(the)g(trees)g(give)f(rise)h(to)f(other)
g(de\256nitions)g(and)h(therefore)f(other)g(`views')h(of)f(trees)262
706 y(as)g(lists.)p 262 756 V 324 805 a Fg(fold)21 b(f)g(st)h(Leaf)f(=)g(st)
324 855 y(fold)g(f)g(st)h(t)87 b(=)21 b(f)h(\(fold)f(f)g(st)h(t'\))f(b)g(t')
694 905 y(where)694 955 y(\(b,t'\))g(=)g(splitTree)f(t)p 262
1005 V 262 1054 a Fl(and)10 b(the)g(splitting)d(up)j(of)g(the)g(general)h
(tree)g(is)f(given)f(by)p 262 1104 V 324 1154 a Fg(splitTree)20
b(::)h(tree)g(*)h(->)f(\(*,tree)f(*\))324 1204 y(splitTree)g(Leaf)260
b(=)22 b(error)f("splitTree")324 1254 y(splitTree)f(\(Node)g(a)i(Leaf)f(t\))g
(=)h(\(a,t\))324 1303 y(splitTree)e(\(Node)g(a)i(t1)f(t2\))43
b(=)22 b(\(b,Node)e(a)i(t1')f(t2\))934 1353 y(where)934 1403
y(\(b,t1'\))f(=)i(splitTree)e(t1)p 262 1453 V 262 1503 a Fl(As)13
b(we)h(remarked)h(above,)g(other)d(traversals)i(give)f(rise)h(to)f(other)g
Fg(cons)f Fl(and)i Fg(fold)f Fl(functions;)262 1553 y(whatever)d(the)g(case,)
i(the)e(family)g(of)g(general)h(list)e(processing)h(functions)f(will)g(be)h
(available.)262 1671 y Fe(Snoc)h(lists)262 1749 y Fl(Elements)f(are)g(added)g
(to)f(the)h(end)g(of)f(a)h(list)f(rather)h(than)f(the)h(start)f(by)g
Fg(cons)p Fl(,)h(and)f(folding)f(is)i(also)262 1799 y(done)g(from)g(that)f
(end.)16 b(The)11 b(requisite)e(de\256nitions)g(are)p 262 1848
V 324 1898 a Fg(empty)21 b(=)g([])324 1948 y(cons)43 b(=)21
b(snoc)324 1998 y(fold)43 b(=)21 b(foldAlt)p 262 2048 V 262
2097 a Fl(where)p 262 2147 V 324 2197 a Fg(snoc)g(a)g([])87
b(=)22 b([a])324 2247 y(snoc)f(a)g(\(b:x\))g(=)h(b)f(:)h(snoc)f(a)g(x)324
2347 y(foldAlt)f(f)i(st)f([])g(=)h(st)324 2396 y(foldAlt)e(f)i(st)f(x)43
b(=)22 b(f)g(\(foldAlt)e(f)h(st)h(x'\))f(a)h(x')716 2446 y(where)957
2574 y Fl(10)p eop
%%Page: 11 11
10 bop 716 307 a Fg(\(a,x'\))21 b(=)g(split)g(x)324 407 y(split)g(::)g([*])g
(->)g(\(*,[*]\))324 457 y(split)g([])86 b(=)22 b(error)f("split")324
506 y(split)g([a])64 b(=)22 b(\(a,[]\))324 556 y(split)f(\(a:x\))f(=)i
(\(b,\(a:x'\)\))629 606 y(where)f(\(b,x'\))f(=)i(split)f(x)p
262 656 1433 2 v 262 824 a Fe(Other)11 b(examples)262 902 y
Fl(Other)h(examples)i(are)g(given)e(by)h(other)f(traversals)h(of)g(trees,)h
(ordered)f(traversals)g(of)g(lists,)g(and)262 952 y(the)d(error)g(types)p
262 1002 V 324 1051 a Fg(err)21 b(*)h(::=)f(Error)f(|)i(OK)f(*)p
262 1101 V 262 1151 a Fl(W)m(e)10 b(leave)h(the)f(de\256nitions)f(as)i
(exercises)g(for)f(the)g(reader)n(.)262 1291 y Fm(8)58 b(T)l(r)o(ee-like)14
b(types)262 1383 y Fl(A)c(typical)f(recursion)h(over)g(the)g(type)p
262 1433 V 324 1483 a Fg(tree)21 b(*)g(::=)h(Leaf)e(|)i(Node)f(*)h(\(tree)e
(*\))i(\(tree)f(*\))p 262 1533 V 262 1583 a Fl(has)10 b(the)g(form)p
262 1632 V 324 1682 a Fg(h)21 b(Leaf)239 b(=)22 b(st)324 1732
y(h)f(\(Node)g(a)h(t1)f(t2\))g(=)h(...h)f(t1...h)f(t2...a...t1...t2...)p
262 1782 V 262 1832 a Fl(and)10 b(so)g(is)g(an)h(application)e(of)p
262 1882 V 324 1931 a Fg(treeRec)20 b(::)i(\(**)f(->)g(**)g(->)h(*)f(->)h
(tree)f(*)g(->)h(tree)f(*)g(->)h(**\))f(->)564 1981 y(**)g(->)g(tree)g(*)h
(->)f(**)324 2031 y(treeRec)f(f)i(st)f(Leaf)g(=)h(st)324 2081
y(treeRec)e(f)i(st)f(\(Node)g(a)g(t1)h(t2\))367 2131 y(=)g(f)g(\(treeRec)e(f)
h(st)h(t1\))f(\(treeRec)f(f)i(st)f(t2\))g(a)h(t1)f(t2)p 262
2180 V 262 2230 a Fl(A)10 b Fj(tr)n(ee-like)h Fl(type)f Fg(t)21
b(*)11 b Fl(carries)g(the)f(operations)p 262 2280 V 324 2330
a Fg(leaf)86 b(::)22 b(t)f(*)324 2380 y(node)86 b(::)22 b(*)f(->)g(t)h(*)g
(->)f(t)h(*)f(->)h(t)f(*)958 2574 y Fl(1)n(1)p eop
%%Page: 12 12
11 bop 324 307 a Fg(treeRec)20 b(::)i(\(**)f(->)g(**)g(->)h(*)f(->)h(t)f(*)h
(->)f(t)h(*)g(->)f(**\))g(->)g(**)h(->)f(t)h(*)f(->)h(**)p
262 357 1433 2 v 262 407 a Fl(and)10 b(using)f(these)i(operations)e(we)i(can)
g(form)f(a)h(sorting)e(algorithm:)p 262 457 V 324 506 a Fg(tSort)21
b(::)g(t)h(*)f(->)g([*])324 556 y(tSort)g(=)g(treeRec)f(mergeVal)h([])498
606 y(where)498 656 y(mergeVal)f(sort1)h(sort2)g(val)g(t1)g(t2)h(=)f(mVal)g
(sort1)g(sort2)g(val)p 262 706 V 262 756 a Fl(where)10 b(the)g(function)f
Fg(mVal)21 b(::)h([*])f(->)g([*])g(->)h(*)f(->)h([*])9 b Fl(takes)i(two)f
(sorted)g(lists)f(and)h(a)262 805 y(value)d(and)h(mer)o(ges)h(them)e(into)g
(a)h(single)f(sorted)g(list.)13 b(Its)7 b(de\256nition)f(simultaneously)g
(generalises)262 855 y(a)11 b(mer)o(ge)h(of)e(two)g(sorted)h(lists)e(and)i
(the)g(insertion)e(of)h(an)h(element)h(into)d(a)i(sorted)g(list,)f(and)h(is)f
(left)262 905 y(as)g(an)h(exercise)g(for)f(the)g(reader)n(.)324
955 y(The)j(essence)i(of)e(a)g(recursion)g(over)f(a)i(tree)f(is)g(that)f(is)h
(works)f(by)h Fj(divide)f(and)h(conquer)p Fl(,)h(so)262 1005
y(that)e(viewing)g(an)h(arbitrary)f(type)g(as)i(a)f(tree)h(will)d(give)i
(divide)f(and)h(conquer)f(algorithms)g(over)262 1054 y(that)e(type.)17
b(Our)11 b(\256rst)f(example)i(is)f(\(of)g(course\))g(trees)g(themselves,)h
(but)f(we)g(can)h(also)f(view)g(lists)262 1104 y(as)f(trees.)262
1223 y Fe(Lists)i(as)h(tr)o(ees)262 1300 y Fl(W)m(e)d(de\256ne,)h(over)g
(lists)p 262 1350 V 324 1400 a Fg(leaf)195 b(=)22 b([])324
1450 y(node)f(a)g(l1)h(l2)f(=)h(l1)f(++)g([a])h(++)f(l2)p 262
1500 V 262 1550 a Fl(and)10 b(for)g(recursion,)p 262 1599 V
324 1649 a Fg(treeRec)20 b(f)i(st)f([])g(=)h(st)324 1699 y(treeRec)e(f)i(st)f
(l)43 b(=)22 b(f)g(v1)f(v2)g(a)h(t1)f(t2)716 1749 y(where)716
1799 y(v1)g(=)h(treeRec)e(f)i(st)f(t1)716 1848 y(v2)g(=)h(treeRec)e(f)i(st)f
(t2)716 1898 y(\(a,t1,t2\))f(=)i(listToTree)d(l)p 262 1948
V 262 1998 a Fl(and)10 b(lists)f(are)i(bisected)g(thus)p 262
2048 V 324 2097 a Fg(listToTree)20 b(::)h([*])g(->)g(\(*,[*],[*]\))324
2197 y(listToTree)f([])86 b(=)22 b(error)f("listToTree")324
2247 y(listToTree)f(\(a:x\))g(=)i(\(a,l1,l2\))738 2297 y(where)738
2347 y(n)43 b(=)22 b(#x)f(div)g(2)738 2396 y(l1)g(=)h(take)f(n)g(x)957
2574 y Fl(12)p eop
%%Page: 13 13
12 bop 738 307 a Fg(l2)21 b(=)h(drop)f(n)g(x)p 262 357 1433
2 v 262 407 a Fl(Other)9 b(views)h(of)g(lists)f(as)h(trees)h(are)f(possible.)
15 b(If,)10 b(for)f(instance,)i(we)f(re-de\256ne)h Fg(listToTree)d
Fl(so)262 457 y(that)p 262 506 V 324 556 a Fg(listToTree)20
b(\(a:x\))g(=)i(\(a,)f([)h(b)f(|)h(b<-x)f(;)g(b<=a)g(])h(,)f([)h(b)g(|)f
(b<-x)g(;)h(b>a)f(]\))p 262 606 V 262 656 a Fl(then)9 b(the)h(function)f(to)h
(\257atten)g(a)h(tree)957 2574 y(13)p eop
%%Page: 14 14
13 bop 262 307 1433 2 v 324 357 a Fg(flatten)20 b(=)i(treeRec)e(joinUp)h([])
324 457 y(joinUp)f(flat1)h(flat2)g(a)g(t1)h(t2)f(=)h(flat1)f(++)g([a])g(++)g
(flat2)p 262 506 V 262 556 a Fl(becomes)11 b(the)f Fj(quicksort)h
Fl(function.)262 696 y Fm(9)58 b(T)l(ype)14 b(abstractions)h(and)g(language)g
(mechanisms)262 789 y Fl(The)g(last)f(three)g(Sections)g(have)h(shown)f(how)g
(to)f(take)i(an)g(abstract)f(view)g(of)g(data)h(structures.)262
838 y(Not)9 b(only)g(do)h(we)g(have)h(libraries)e(of)h(general)h(functions)d
(over)i(lists,)g(trees)h(and)f(so)g(on,)g(but)f(these)262 888
y(libraries)k(can)i(be)g(extended,)g(by)f(further)g(parametrisation,)h(to)e
(list-like)g(and)h(tree-like)g(types.)262 938 y(As)c(examples,)i(we)f(showed)
f(that)g(lists)f(can)i(be)g(tree-like,)f(and)g(trees)h(list-like,)e
(according)h(to)g(the)262 988 y(kind)f(of)h(recursion)f(we)i(wish)f(to)f
(perform.)15 b(This)10 b(Section)g(looks)g(at)g(the)g(mechanisms)h(by)f
(which)262 1038 y(this)f(view)h(of)g(abstraction)f(can)i(be)g(supported)e(in)
h(various)f(programming)h(languages.)262 1156 y Fe(Parameter)j(passing)262
1234 y Fl(In)e(a)h(language)f(with)f(higher)o(-order)g(functions,)h(we)h(can)
g(de\256ne)g(the)f(library)f(functions)g(such)i(as)262 1284
y Fg(map)d Fl(relative)h(to)g(a)h(triple)e(of)h(parameters,)h(as)g(we)g(did)f
(for)f Fg(mapGen)h Fl(in)f(Section)h(6)g(above.)324 1334 y(This)f(method)g
(calls)g(for)f(explicit)g(parameters)i(to)f(be)g(given)g(at)g(each)h
(invocation)e(of)h Fg(mapGen)p Fl(,)262 1383 y(but)i(has)h(the)g(advantage)g
(that)f Fg(mapGen)g Fl(can)i(in)e(a)i(single)e(scope)h(be)h(used)f(over)f
(dif)o(ferent)h(types,)262 1433 y(or)c(dif)o(ferent)h(recursors)g(over)g(the)
h(same)g(type.)15 b(An)9 b(instance)g(of)g(the)g(latter)g(might)f(be)h(to)g
(consider)262 1483 y(ordinary)g(recursion)g(\()p Fg(fold)p
Fl(\))h(and)g(snoc-recursion)g(\()p Fg(foldAlt)p Fl(\))e(in)i(the)g(same)i
(scope.)262 1602 y Fe(Constructor)f(classes)262 1679 y Fl(The)h(Gofer)g
(language)g(supports)f(constructor)g(classes,)k([Jones,)e(1993],)f(which)f
(generalise)i(the)262 1729 y(type)d(classes)i(of)e(Haskell)h(by)f
(\(essentially\))f(allowing)g(the)i(classi\256cation)f(of)h(type)f
(constructors)262 1779 y(rather)17 b(than)h(types.)37 b(Our)18
b(classi\256cations)g(of)f(lists)g(and)h(trees)g(in)f(this)g(paper)h(give)g
(exactly)262 1829 y(constructor)11 b(classes.)23 b(Using)12
b(a)h(hybrid)d(notation)h(\()p Fg(*)p Fl(')n(s)h(for)g(type)g(variables\),)h
(we)g(can)g(give)f(the)262 1879 y(class)f(of)f(tree-like)f(types)h(thus:)p
262 1928 V 324 1978 a Fg(class)21 b(TreeRec)f(t)h(where)324
2028 y(leaf)86 b(::)22 b(t)f(*)324 2078 y(node)86 b(::)22 b(*)f(->)g(t)h(*)g
(->)f(t)h(*)f(->)h(t)f(*)324 2128 y(treeRec)f(::)i(\(**)f(->)g(**)g(->)h(*)f
(->)h(t)f(*)h(->)f(t)h(*)g(->)f(**\))g(->)g(**)h(->)f(t)h(*)f(->)h(**)p
262 2177 V 262 2227 a Fl(W)m(e)11 b(can)h(then)f(in)g(a)g(single)g(scope)h
(give)e(various)h Fj(instantiati)o(ons)d Fl(of)j(the)g(class.)19
b(W)m(e)12 b(can)g(declare)262 2277 y(lists)d(as)i(tree-like)e(thus)957
2574 y(14)p eop
%%Page: 15 15
14 bop 262 307 1433 2 v 324 357 a Fg(instance)20 b(TreeRec)g(List)h(where)346
407 y(leaf)g(=)g([])346 457 y(node)g(=)g(...)346 506 y(treeRec)f(=)i(...)p
262 556 V 262 606 a Fl(The)12 b(de\256nition)e(of)i Fg(tSort)f
Fl(using)g Fg(leaf)p Fl(,)h Fg(node)g Fl(and)g Fg(treeRec)f
Fl(will)f(then)i(be)g(applicable)g(over)262 656 y(lists.)324
706 y(Note,)e(however)n(,)h(that)f(only)f(one)i(instance)f(declaration)g(per)
g(type)g(is)h(allowed)e(in)h(any)g(single)262 756 y(scope.)16
b(Using)10 b(this)f(mechanism,)j(therefore,)f(does)f(not)g(allow)g(us)g(to)g
(view)g(lists)g(as)h(trees)g(in)e(two)262 805 y(dif)o(ferent)g(ways)i(in)e(a)
i(single)f(scope.)262 924 y Fe(Abstract)h(data)h(types)262
1002 y Fl(Many)k(programming)g(languages)h(allow)g(declarations)f(of)h
(abstract)g(data)g(types,)i(by)e(means)262 1051 y(of)e(a)i(speci\256ed)g
(signature)e(to)h(which)f(an)i(implementation)e(is)h(bound.)31
b(Note)16 b(that)g(only)f(one)262 1101 y(implementation)e(is)i(allowed)g(per)
g(scope,)j(and)d(that)f(the)h(abstraction)g(given)f(by)h(such)g(a)h(type)262
1151 y(is)c Fj(closed)p Fl(:)20 b(no)12 b(operations)g(are)i(allowed)e(on)g
(the)h(type)f(beyond)g(those)h(in)f(the)h(signature.)22 b(This)262
1201 y Fj(pr)n(oscriptive)12 b Fl(approach)h(does)g(not)f(\256t)g(well)h
(with)e(the)i Fj(permissive)g Fl(tenor)f(of)g(this)g(work,)h(where)262
1251 y(we)f(use)g(the)g(tree-like)f(nature)g(of)h(a)g(type)g(to)f(allow)g
(certain)h(sorts)f(of)h(de\256nition,)e(rather)i(than)f(to)262
1300 y(prevent)e(all)h(others.)262 1419 y Fe(Structur)o(es)h(and)h(signatur)o
(es)262 1497 y Fl(The)d(approach)g(of)f(binding)f(structures)h(to)g
(signatures)g(in)g(Standard)g(ML)h(is)g(permissive,)g(but)f(will)262
1547 y(not)h(allow)g(the)h Fj(overloading)e Fl(of)i(multiple)f(bindings)f
(per)i(scope.)16 b(The)10 b(same)i(restriction)c(applies)262
1596 y(to)h(parametrised)i(modules,)f(as)h(in)f([Goguen,)g(1990].)262
1715 y Fe(Dynamic)i(binding)262 1793 y Fl(In)e(most)g(object-oriented)f
(languages)i(there)f(are)h(mechanisms)h(for)e(dynamic)h(binding.)j(In)c
Fg(C++)p Fl(,)262 1842 y(for)e(example,)j(a)e(virtual)f(class)i(forces)f(all)
g(its)g(subclasses)h(to)e(provide)g(operations,)h(such)g(as)h(those)262
1892 y(of)f(a)h(tree-like)f(type.)15 b(Each)10 b(subclass)h(can)f(implement)f
(these)h(in)f(dif)o(ferent)g(ways,)i(but)e(objects)g(of)262
1942 y(any)h(of)g(these)h(subclasses)g(are)h(all)e(considered)g(to)g(be)g(of)
g(the)h(virtual)e(class.)16 b(A)11 b(list)e(of)h(objects)g(of)262
1992 y(such)g(a)h(class)g(will)e(have)i(to)f(associate)h(operations)f(with)f
(values)i(in)e(the)i(list)e(dynamically)m(,)h(since)262 2042
y(a)g(single)g(operation)f(will)g(not)g(in)h(general)h(serve)g(all)f(objects)
f(of)h(the)h(list.)262 2181 y Fm(10)58 b(Conclusion)262 2274
y Fl(The)10 b(aim)g(of)g(this)f(paper)h(has)h(been)f(to)g(show)f(that)h(the)f
(twin)g(features)i(of)e(higher)o(-order)g(functions)262 2324
y(and)h(polymorphism)f(\(or)h(generics,)i(in)e(other)g(terminology\))f
(support)g(a)i(programming)f(style)g(in)262 2374 y(which)d(re-use)g(of)h
(software)f(is)g(encouraged.)15 b(W)m(e)8 b(illustrated)d(the)j(proposition)t
(with)f(the)g(example)262 2424 y(of)13 b(data)i(abstraction)e(\320)h(the)g
(treatment)g(of)g(one)g(type)g(as)h(if)f(it)f(were)i(structured)f(like)f
(another)957 2574 y(15)p eop
%%Page: 16 16
15 bop 262 307 a Fl(\320)11 b(which)g(supports)g(a)h(general,)h(`algorithm)d
(oriented')h(style,)h(as)g(introduced)f(in)g([Musser)h(and)262
357 y(Stepanov)m(,)e(1994].)262 497 y Fm(Refer)o(ences)262
589 y Fl([Goguen,)g(1990])19 b(Joseph)14 b(Goguen.)23 b(Higher)o(-order)13
b(functions)f(considered)i(unnecessary)g(for)310 639 y(higher)o(-order)e
(programming.)23 b(In)13 b(David)g(A.)h(T)o(urner)n(,)h(editor)n(,)f
Fj(Resear)n(ch)h(T)l(opics)f(in)f(Func-)310 689 y(tional)8
b(Pr)n(ogramming)p Fl(.)i(Addison)f(W)m(esley)m(,)j(1990.)262
772 y([Hudak)d Fj(et)i(al.)p Fl(,)f(1992])20 b(Paul)14 b(Hudak,)i(Simon)e
(Peyton)g(Jones,)i(and)e(Philip)f(W)m(adler)i(\(Editors\).)310
822 y(Report)6 b(on)h(the)g(Programming)g(Language)h(Haskell,)g(version)e
(1.2.)k Fj(ACM)d(SIGPLAN)h(Notices)p Fl(,)310 872 y(27\(5\),)i(1992.)262
955 y([Jones,)g(1993])20 b(Mark)11 b(Jones.)18 b(A)12 b(system)g(of)e
(constructor)h(classes:)17 b(overloading)10 b(and)h(implicit)310
1004 y(higher)o(-order)i(polymorphism.)25 b(In)14 b Fj(FPCA)h(93)f(\261)h
(Functional)d(Pr)n(ogramming)i(Languages)310 1054 y(and)c(Computer)f(Ar)n
(chitectur)n(e)p Fl(.)j(ACM)e(Press,)i(1993.)262 1137 y([Kershenbaum)e
Fj(et)h(al.)p Fl(,)f(1988])20 b(Aaron)27 b(Kershenbaum,)33
b(David)27 b(Musser)n(,)32 b(and)c(Alexander)310 1187 y(Stepanov)m(.)37
b(Higher)18 b(order)g(imperative)g(programming.)36 b(T)m(echnical)19
b(report,)i(Computer)310 1237 y(Science)11 b(Department,)g(Rensselaer)g
(Polytechnic)f(Institute,)f(1988.)262 1320 y([Milner)g Fj(et)h(al.)p
Fl(,)g(1990])20 b(Robin)9 b(Milner)n(,)i(Mads)g(T)m(ofte,)h(and)f(Robert)f
(Harper)n(.)16 b Fj(The)11 b(De\256nition)e(of)310 1370 y(Standar)n(d)g(ML)p
Fl(.)15 b(MIT)10 b(Press,)i(1990.)262 1453 y([Musser)e(and)g(Stepanov)m(,)h
(1994])19 b(David)h(Musser)g(and)g(Alexander)f(Stepanov)m(.)41
b(Algorithm-)310 1503 y(oriented)9 b(Generic)i(Libraries.)k
Fj(Softwar)n(e)10 b(\320)g(Practice)h(and)f(Experience)p Fl(,)i(24,)e(1994.)
262 1586 y([Stepanov)f(and)i(Lee,)h(1994])19 b(Alexander)8
b(Stepanov)f(and)h(Meng)f(Lee.)12 b(The)d(Standard)e(Template)310
1635 y(Library)m(.)15 b(T)m(echnical)c(report,)f(Hewlett-Packard)g
(Laboratories,)h(Palo)f(Alto,)g(USA,)g(1994.)262 1718 y([T)o(urner)n(,)g
(1985])20 b(David)9 b(A.)h(T)o(urner)n(.)k(Miranda:)g(a)d(non-strict)d
(functional)g(language)i(with)f(poly-)310 1768 y(morphic)g(types.)15
b(In)10 b(J.)g(P)-5 b(.)11 b(Jouannaud,)f(editor)n(,)g Fj(Functional)f(Pr)n
(ogramming)g(Languages)g(and)310 1818 y(Computer)g(Ar)n(chitectur)n(e)p
Fl(.)k(Springer)o(-V)-5 b(erlag,)10 b(1985.)957 2574 y(16)p
eop
%%Trailer
end
userdict /end-hook known{end-hook}if
%%EOF
